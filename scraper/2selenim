from distutils.command.build_scripts import first_line_re
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.wait import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
import json
import time
import pandas as pd
import requests
from bs4 import BeautifulSoup

browser = webdriver.Chrome('E:\chromedriver.exe')
browser.get('https://proshore.eu/resources/')

items = []
des = []
rt = []
dg = []
an = []
img = []

last_height = browser.execute_script("return document.body.scrollHeight")
itemTargetCount = 100
while itemTargetCount > len(items):
    browser.execute_script("window.scrollTo(0,document.body.scrollHeight);")

    time.sleep(5)
    new_height = browser.execute_script("return document.body.scrollHeight")
    if new_height == last_height:
        break
    last_height = new_height
    elements = browser.find_elements(By.CSS_SELECTOR, "#post-836 > div > div > section.elementor-section.elementor-top-section.elementor-element.elementor-element-3f0c3c1f.elementor-section-boxed.elementor-section-height-default.elementor-section-height-default > div > div > div > div > div > div > div.playground-list-wrapper > div.playground-list.playground-list-max-3 > div")
    name = []
    desc = []
    rtime = []
    desig = []
    aname = []
    imag = []

    for element in elements:
        title = element.find_element(By.TAG_NAME, 'h4').text
        name.append({
            title: title
        })
        items = name

        description = element.find_element(
            By.CLASS_NAME, 'playground-excerpt').text
        desc.append({
            description: description
        })
        des = desc

        readtime = element.find_element(
            By.XPATH, "//span[@class='playground-read-time-text']").text
        rtime.append({
            readtime: readtime()
        })
        rt = rtime

        # designation= element.find_element(By.XPATH,'//*[@id="post-836"]/div/div/section[2]/div/div/div/div/div/div/div[1]/div[2]/div[1]/div/div[2]/div[2]/div[2]/div[1]').text
        # desig.append({
        #     designation:designation
        # })
        # dg=desig

        # authorname= element.find_element(By.XPATH,'//*[@id="post-836"]/div/div/section[2]/div/div/div/div/div/div/div/div/div/div/div/div/div/div').text
        # aname.append({
        #         authorname:authorname
        #     })
        # an=aname

        # for x in range(1,11):
        #     authorname= element.find_element(By.XPATH,(f'//*[@id="post-836"]/div/div/section[2]/div/div/div/div/div/div/div[1]/div[2]/div[{x}]/div/div[2]/div[2]/div[2]/div[1]')).text
        #     aname.append({
        #         authorname:authorname
        #     })
        #     an=aname


print(items, des, rt, dg, an)

print(len(items))
